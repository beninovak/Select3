function Select3_openSelect3(e,t){e.classList.add("opened");let l=e.querySelector(".inner"),n=l.scrollHeight;n=n>t?t:n,l.style.maxHeight=n+l.offsetHeight+"px",l.classList.remove("drop-up");let s=window.innerHeight-l.getBoundingClientRect().top;l.offsetHeight>=s&&l.classList.add("drop-up")}function Select3_closeSelect3(e){let t=e.querySelector(".inner");e.classList.remove("opened"),t.style.maxHeight="0px",null!==e.querySelector("input.search")&&(e.querySelector("input.search").value=""),e.querySelector(".no-results")?.remove();for(let t of e.querySelectorAll(".option-hidden"))t.classList.remove("option-hidden")}function Select3_openCloseSelect3(e,t={}){e.classList.toggle("opened"),e.classList.contains("opened")?Select3_openSelect3(e,t.dropdownMaxHeight):Select3_closeSelect3(e)}function Select3_appendOptions(e,t,l,n,s){let o=document.createElement("span");o.setAttribute("data-value",n.value.toString());let c=e.multiple;if(Object.keys(n.dataset).length){let e=n.dataset;for(const t in e)o.setAttribute("data-"+t,e[t])}if(""===n.value&&""===n.textContent)o.classList.add("placeholder"),o.textContent=""!==s.placeholder?s.placeholder:" ";else if(null!==s.formatOptionsFunction){let e=document.createElement("span");e.append(s.formatOptionsFunction(n)),o.innerHTML=e.innerHTML}else o.textContent=n.label.length?n.label:n.textContent;if(n.selected){let l=o.cloneNode();l.classList.add("selected-top"),l.textContent=n.label.length?n.label:n.textContent,c&&l.prepend(Select3_getCloseBtn(e,t,s)),t.append(l),o.classList.add("selected"),o.setAttribute("data-selected","1")}else o.setAttribute("data-selected","0");n.disabled&&o.classList.add("disabled"),o.addEventListener("click",(l=>{let a=o.cloneNode();if(a.innerHTML=o.textContent,a.classList.add("selected-top"),!n.disabled){if(e.selectedOptions.length>=s.maximumSelectedOptions&&"0"===o.getAttribute("data-selected"))return;let l=!1;if((!c&&e.val()===a.getAttribute("data-value")||c&&e.val().includes(a.getAttribute("data-value")))&&(l=!0),c||l)c&&(l?(t.querySelector(':scope > span[data-value="'+a.getAttribute("data-value")+'"]').remove(),n.removeAttribute("selected"),o.classList.remove("selected"),o.setAttribute("data-selected","0"),Select3_showPlaceholderIfAppropriate(e,t,s)):(t.insertBefore(a,t.querySelector(".inner")),n.setAttribute("selected","selected"),o.classList.add("selected"),o.setAttribute("data-selected","1"),t.querySelector(":scope > span.placeholder")?.remove()),e.selectedOptions.length===s.maximumSelectedOptions?t.classList.add("maxed"):t.classList.remove("maxed"),a.prepend(Select3_getCloseBtn(e,t,s)),e.dispatchEvent(new Event("change")));else{let l=e.querySelectorAll("option");for(let e of l)e.removeAttribute("selected");let s=t.querySelectorAll(".inner span");for(let e of s)e.classList.remove("selected"),e.setAttribute("data-selected","0");n.setAttribute("selected","selected"),t.querySelector(".selected-top, .placeholder").replaceWith(a),o.classList.add("selected"),o.setAttribute("data-selected","1"),e.dispatchEvent(new Event("change"))}s.closeOnSelect&&Select3_closeSelect3(t,s)}})),l.append(o)}function Select3_showPlaceholderIfAppropriate(e,t,l){if(0===e.selectedOptions.length&&""!==l.placeholder){let e=document.createElement("span");e.classList.add("placeholder"),e.textContent=l.placeholder,t.prepend(e)}}function Select3_getCloseBtn(e,t,l){let n=document.createElement("b");return n.classList.add("remove"),n.textContent="×",n.addEventListener("click",(n=>{Select3_removeOption(e,t,n.target.parentElement,l)})),n}function Select3_removeOption(e,t,l,n){let s=l.getAttribute("data-value");e.querySelector('option[value="'+s+'"]').removeAttribute("selected");let o=t.querySelector('.inner span[data-value="'+s+'"]');o.classList.remove("selected"),o.setAttribute("data-selected","0"),l.remove(),Select3_showPlaceholderIfAppropriate(e,t,n),e.dispatchEvent(new Event("change"))}function Select3_filterInput(e,t,l,n,s){e=e.toUpperCase();for(let l of t){if((l.textContent||l.innerText).toUpperCase().indexOf(e)>-1?l.classList.remove("option-hidden"):l.classList.add("option-hidden"),null!==l.closest("div.optgroup")){let e=!1,t=l.parentElement.querySelectorAll("span:not(.title, .no-results)");for(let l of t)if(!l.classList.contains("option-hidden")){e=!0;break}e?l.closest("div.optgroup").classList.remove("option-hidden"):l.closest("div.optgroup").classList.add("option-hidden")}}if(""!==s.searchNoResults){let e=n.querySelectorAll("span:not(.title, .no-results, .option-hidden)");if(e.length)n.querySelector(".no-results")?.remove();else if(!e.length&&!n.querySelector(".no-results")){let e=document.createElement("span");e.classList.add("no-results"),e.textContent=s.searchNoResults,n.append(e)}}}function Select3_applyConfig(e){const t={search:!1,closeOnSelect:!0,minimumInputLength:3,placeholder:"",searchNoResults:"",dropdownMaxHeight:300,maximumSelectedOptions:100,formatOptionsFunction:null};for(let l in e)t.hasOwnProperty(l)&&Select3_isOptionValid(l,e[l])&&(t[l]=e[l]);return t}function Select3_isOptionValid(e,t){switch(e){case"closeOnSelect":case"search":return"boolean"==typeof t;case"minimumInputLength":case"dropdownMaxHeight":case"maximumSelectedOptions":return"number"==typeof t&&t>0;case"placeholder":case"searchNoResults":return"string"==typeof t&&t.length>0&&t.length<200;case"formatOptionsFunction":return"function"==typeof t}}function Select3_initDocumentListener(){document.addEventListener("click",(e=>{if(null===e.target.closest("div.select3"))for(let e of document.querySelectorAll("div.select3"))Select3_closeSelect3(e)}))}Element.prototype.Select3=function(e){const t=this;if("SELECT"!==t.tagName)return!1;t.hasAttribute("data-select3-initialized")&&"1"==t.getAttribute("data-select3-initialized")&&t.nextSibling?.classList.contains("select3")&&t.nextSibling.remove(),t.multiple||(e.closeOnSelect=!0),e=Select3_applyConfig(e);let l=document.createElement("div");l.classList.add("select3");for(let e of t.classList)l.classList.add(e);l.addEventListener("click",(t=>{const l=t.target.classList;if(l.contains("select3")||l.contains("selected-top")||l.contains("placeholder")){let l=t.target.closest("div.select3");Select3_openCloseSelect3(l,e);for(let e of document.querySelectorAll("div.select3"))e.isEqualNode(l)||Select3_closeSelect3(e)}})),t.selectedOptions.length>e.maximumSelectedOptions&&(e.maximumSelectedOptions=t.selectedOptions.length),t.multiple?l.classList.add("multiple"):l.classList.add("single");let n=document.createElement("div");if(n.classList.add("inner"),e.search){let l=document.createElement("div");l.classList.add("search-wrapper");let s=document.createElement("input");s.classList.add("search"),s.setAttribute("type","search");let o=0;s.addEventListener("keyup",(l=>{let s=l.target.value.length;if(s>=e.minimumInputLength||s<o){let s=l.target.closest(".inner").querySelectorAll("span:not(.title, .no-results)");Select3_filterInput(l.target.value,s,t,n,e)}o=s})),l.append(s),n.prepend(l)}let s=document.querySelector('label[for="'+t.id+'"]');null!==s&&s.addEventListener("click",(t=>{t.stopPropagation();for(let e of document.querySelectorAll("div.select3"))Select3_closeSelect3(e);Select3_openSelect3(l,e.dropdownMaxHeight)}));for(let s of t.children)if("OPTION"===s.tagName)Select3_appendOptions(t,l,n,s,e);else if("OPTGROUP"===s.tagName){let o=document.createElement("div");o.classList.add("optgroup");let c=document.createElement("span");c.classList.add("title"),c.textContent=s.label,o.append(c);for(let n of s.children)Select3_appendOptions(t,l,o,n,e);n.append(o)}if(0===t.selectedOptions.length||""===t[0].value&&""===t[0].textContent){let t=document.createElement("span");t.classList.add("placeholder"),t.textContent=""!==e.placeholder?e.placeholder:" ",l.querySelector("span.selected-top")?.remove(),l.prepend(t)}return l.append(n),t.style.display="none",t.parentNode.insertBefore(l,t.nextSibling),t.val=function(){let e=[];for(let l of t.selectedOptions)e.push(l.value);return t.multiple?e:e[0]},t.open=function(t=null){null!=t&&t.stopPropagation(),Select3_openSelect3(l,e.dropdownMaxHeight)},t.close=function(e=null){null!=e&&e.stopPropagation(),Select3_closeSelect3(l)},t.setAttribute("data-select3-initialized","1"),t},Select3_initDocumentListener();